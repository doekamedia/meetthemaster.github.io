<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Open in Steam</title>
    <style>
        body { 
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; 
            background-color: #1b2838; 
            background: radial-gradient(circle at top left, #1b2838 0%, #171a21 100%);
            color: #c6d4df; 
            display: flex; align-items: center; justify-content: center; 
            min-height: 100vh; margin: 0; text-align: center;
        }
        .container { padding: 30px; max-width: 380px; width: 90%; }
        
        .header-section { margin-bottom: 25px; }
        .header-section h2 { color: #ffffff; font-size: 24px; margin-bottom: 10px; }
        .header-section p { color: #ff9900; font-weight: bold; font-size: 14px; margin: 0; }

        .instruction-card {
            background: rgba(0, 0, 0, 0.4);
            border: 2px solid #47bfff;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 25px;
            box-shadow: 0 0 20px rgba(71, 191, 255, 0.2);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { border-color: #47bfff; }
            50% { border-color: #ffffff; }
            100% { border-color: #47bfff; }
        }

        .step { display: flex; align-items: center; margin-bottom: 15px; text-align: left; font-size: 16px; color: #ffffff; }
        .step-num { 
            background: #47bfff; color: white; width: 28px; height: 28px; 
            border-radius: 50%; display: flex; align-items: center; 
            justify-content: center; margin-right: 12px; flex-shrink: 0; font-weight: bold; 
        }

        .highlight { color: #47bfff; font-weight: bold; }

        /* Hidden by default */
        #steam-action-section {
            display: none;
            margin-top: 20px;
        }

        .btn-steam {
            display: block;
            background: linear-gradient(to right, #47bfff 0%, #1a44c2 100%);
            color: white !important;
            padding: 22px;
            border-radius: 10px;
            text-decoration: none;
            font-weight: bold;
            font-size: 18px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.4);
            text-transform: uppercase;
        }

        .footer { margin-top: 25px; font-size: 13px; color: #565d63; }
    </style>
</head>
<body>

    <div class="container">
        <div class="header-section">
            <h2>Almost there...</h2>
            <p id="status-msg">TikTok blocks direct links.</p>
        </div>

        <div id="tiktok-instructions" class="instruction-card">
            <h3 style="color: #ffffff; text-transform: uppercase; font-size: 16px;">Step 1: Open default Browser</h3>
            <div class="step">
                <div class="step-num">1</div>
                <div>Tap the <span class="highlight">THREE DOTS(...)</span> at the top right.</div>
            </div>
            <div class="step">
                <div class="step-num">2</div>
                <div>Select <span class="highlight">'Open in Browser'</span>.</div>
            </div>
        </div>

        <div id="steam-action-section">
            <div style="margin-bottom: 15px; font-weight: bold; text-transform: uppercase; font-size: 13px;">Step 2: Wishlist the Game</div>
            <a href="https://store.steampowered.com/app/3184620/?utm_source=TTbut28&utm_campaign=mtm09" class="btn-steam">
                View on Steam
            </a>
        </div>

        <div class="footer">
            Switch to your default browser to enable Steam.
        </div>
    </div>

    <script>
    function checkBrowser() {
        const ua = navigator.userAgent || navigator.vendor || window.opera;
        
        // 1. Check for common strings (TikTok, Instagram, Facebook, etc.)
        const isCommonInApp = /TikTok|Instagram|FBAN|FBAV|Messenger|Line|Puffin/i.test(ua);
        
        // 2. Check for the "Version/X.X" string + Safari, which is how the TikTok WebView 
        // often identifies on iOS, or the presence of "WebView"
        const isWebView = /(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(ua) || ua.includes('wv');

        // 3. Check for specific TikTok sub-strings that appear in newer versions
        const isTikTokSpecific = ua.includes('ByteLocale') || ua.includes('ByteFullConfig');

        const instructionCard = document.getElementById('tiktok-instructions');
        const actionSection = document.getElementById('steam-action-section');
        const statusMsg = document.getElementById('status-msg');

        // If ANY of these are true, we assume they are stuck in the TikTok/In-App browser
        if (isCommonInApp || isWebView || isTikTokSpecific) {
            instructionCard.style.display = 'block';
            actionSection.style.display = 'none';
        } else {
            // This is the "Clean" browser (Safari/Chrome/Firefox)
            instructionCard.style.display = 'none';
            actionSection.style.display = 'block';
            statusMsg.innerText = "Browser verified: Ready to open Steam";
            statusMsg.style.color = "#47bfff";
        }
    }

    window.onload = checkBrowser;
</script>

</body>
</html>
