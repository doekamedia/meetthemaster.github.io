<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Redirecting to Steam...</title>
    
    <script>
    !function (w, d, t) {
      w.TiktokAnalyticsObject=t;var ttq=w[t]=w[t]||[];ttq.methods=["page","track","identify","instances","debug","on","off","once","ready","alias","group","enableCookie","disableCookie","holdConsent","revokeConsent","grantConsent"],ttq.setAndDefer=function(t,e){t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}};for(var i=0;i<ttq.methods.length;i++)ttq.setAndDefer(ttq,ttq.methods[i]);ttq.instance=function(t){for(
      var e=ttq._i[t]||[],n=0;n<ttq.methods.length;n++)ttq.setAndDefer(e,ttq.methods[n]);return e},ttq.load=function(e,n){var r="https://analytics.tiktok.com/i18n/pixel/events.js",o=n&&n.partner;ttq._i=ttq._i||{},ttq._i[e]=[],ttq._i[e]._u=r,ttq._t=ttq._t||{},ttq._t[e]=+new Date,ttq._o=ttq._o||{},ttq._o[e]=n||{};n=document.createElement("script")
      ;n.type="text/javascript",n.async=!0,n.src=r+"?sdkid="+e+"&lib="+t;e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(n,e)};

      ttq.load('D599GSBC77U9GK0PJHQ0');
    }(window, document, 'ttq');
    </script>

    <style>
        body { background-color: #1b2838; color: #ffffff; font-family: sans-serif; display: flex; align-items: center; justify-content: center; min-height: 100vh; margin: 0; text-align: center; }
        .loader { border: 4px solid #f3f3f3; border-top: 4px solid #47bfff; border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; margin: 20px auto; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .hidden { display: none; }
        b { color: #47bfff; }
    </style>
</head>
<body>

    <div id="tiktok-view" class="hidden">
        <h2>Open in Browser to Wishlist</h2>
        <p>1. Tap the <b>Three Dots (...)</b></p>
        <p>2. Tap <b>Open in Browser</b></p>
    </div>

    <div id="redirect-view" class="hidden">
        <h2>Verifying...</h2>
        <div class="loader"></div>
        <p>Taking you to Steam</p>
    </div>

    <script>
    (function() {
        const ua = navigator.userAgent || navigator.vendor || window.opera;
        const isTikTok = /TikTok/i.test(ua) || ua.includes('ByteLocale') || ua.includes('ByteFullConfig');
        const isWebView = /(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(ua) || ua.includes('wv');
        
        const steamURL = "https://store.steampowered.com/app/3184620";

        if (isTikTok || isWebView) {
            // Gebruiker zit nog vast in TikTok
            document.getElementById('tiktok-view').classList.remove('hidden');
        } else {
            // Gebruiker is in Safari/Chrome
            document.getElementById('redirect-view').classList.remove('hidden');

            // Vuur Pixel
            ttq.instance('D599GSBC77U9GK0PJHQ0').track('ViewContent', {
                content_id: '3184620',
                content_type: 'product'
            });

            // Automatische redirect via href na 1 seconde
            setTimeout(function() {
                window.location.href = steamURL;
            }, 1000);
        }
    })();
    </script>
</body>
</html>
