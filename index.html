<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Open in Steam</title>
    <style>
        body { 
            font-family: "Motiva Sans", Sans-serif, Arial, Helvetica; 
            background-color: #1b2838; 
            background: radial-gradient(circle at top left, #1b2838 0%, #171a21 100%);
            color: #c6d4df; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            min-height: 100vh; 
            margin: 0; 
            text-align: center; 
        }
        .container { padding: 30px; max-width: 400px; }
        h2 { color: #ffffff; font-size: 24px; text-transform: uppercase; margin-bottom: 15px; letter-spacing: 1px; }
        p { font-size: 16px; color: #acb2b8; margin-bottom: 30px; line-height: 1.4; }
        
        .instruction-box {
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid #47bfff;
            padding: 25px;
            border-radius: 4px;
            text-align: left;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }
        
        .instruction-box h3 {
            font-size: 16px;
            color: #47bfff;
            margin: 0 0 15px 0;
            text-transform: uppercase;
        }

        .step {
            font-size: 15px;
            margin-bottom: 12px;
            display: flex;
            align-items: flex-start;
            color: #ffffff;
        }

        .step-num {
            background: #47bfff;
            color: #ffffff;
            width: 22px;
            height: 22px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
            margin-right: 12px;
            flex-shrink: 0;
        }

        .highlight { color: #47bfff; font-weight: bold; }
    </style>
</head>
<body>

    <div class="container">
        <h2>Almost there...</h2>
        <p>TikTok is currently blocking the connection. To open the page on <span class="highlight">Steam</span>, please follow these steps:</p>
        
        <div class="instruction-box">
            <h3>Required Action</h3>
            
            <div class="step">
                <div class="step-num">1</div>
                <div>Tap the <span class="highlight">three dots (...)</span> or <span class="highlight">share icon</span> in the corner.</div>
            </div>

            <div class="step">
                <div class="step-num">2</div>
                <div>Select <span class="highlight">'Open in Browser'</span> or <span class="highlight">'Safari'</span>.</div>
            </div>

            <div class="step">
                <div class="step-num">3</div>
                <div>The Steam page will then open <span class="highlight">automatically</span>.</div>
            </div>
        </div>
    </div>

<script>
    (function() {
        var appId = "3184620";
        var utm = "?utm_source=TT_instructions&utm_campaign=mtm09";
        var steamUrl = "https://store.steampowered.com/app/" + appId + "/" + utm;

        // We kijken heel specifiek naar kenmerken van de TikTok-browser
        var ua = navigator.userAgent || navigator.vendor || window.opera;
        var isTikTok = (ua.indexOf('TikTok') > -1) || (ua.indexOf('Musicaly') > -1);
        
        // We kijken ook of de pagina binnen een "In-App" omgeving wordt geladen
        var isInApp = /FBAN|FBAV|Instagram|LinkedIn|Snapchat/i.test(ua);

        if (isTikTok || isInApp) {
            // STOP: We zijn in TikTok. 
            // We doen helemaal niets, de gebruiker MOET de instructies lezen.
            console.log("In-app browser gedetecteerd. Redirect geblokkeerd.");
        } else {
            // GA DOOR: We zijn in Safari/Chrome/Steam.
            // Alleen nu sturen we ze door.
            window.location.replace(steamUrl);
        }
    })();
</script>
</body>
</html>
